#:import dp kivy.metrics.dp

MDScreen:
    MDBottomNavigation:
        id: panel
        MDBottomNavigationItem
            name: "Screen1"
            text: "Administration"
            icon: "account-alert"
            BoxLayout:
                orientation: 'vertical'

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: .1
                    height: self.minimum_height

                    Label:
                        id: label_main_header1
                        halign: 'left'
                        markup: True
                        text: "[color=#FF0000][size=35][b]No OpenTTD Server Found in Settings![/b][/size][/color]"
                        color: 0,0,0,1
                    Label:
                        id: label_main_header2
                        halign: 'left'
                        markup: True
                        text: ""
                        color: 0,0,0,1
                    Label:
                        id: label_main_header3
                        halign: 'left'
                        markup: True
                        text: ""
                        color: 0,0,0,1

                ScrollView:
                    size_hint_y: None
                    height: self.parent.height - label_main_header1.height - label_main_header2.height - label_main_header3.height
                    do_scroll_y: True

                    GridLayout:
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        padding: dp(20)  # Add padding to the GridLayout

                        Button:
                            text: 'Demo User 1\r\nCompany: Demo User Transport Money: $184,000'
                            size_hint_y: None
                            height: '48dp'
                        Button:
                            text: 'Demo User 2\r\nCompany: Demo User Transport Money: $750,230'
                            size_hint_y: None
                            height: '48dp'
                        Button:
                            text: 'Demo User 3\r\nCompany: Demo User Transport Money: $2,340,030'
                            size_hint_y: None
                            height: '48dp'
                        Button:
                            text: 'Demo User 4\r\nCompany: Demo User Transport Money: $320,023'
                            size_hint_y: None
                            height: '48dp'

        MDBottomNavigationItem:
            name: "screen2"
            text: "Chat"
            icon: "chat"
            BoxLayout:
                orientation: "vertical"

                BoxLayout:
                    size_hint_y: None
                    height: "48dp"
                    padding: "10dp"
                    spacing: "10dp"

                    MDTextField:
                        id: chat_input
                        hint_text: "Enter chat message"
                        size_hint_x: 0.8
                        on_text_validate: app.send_chat_message(self.text)

                    MDRaisedButton:
                        text: "Send"
                        size_hint_x: 0.2
                        on_release: app.send_chat_message(chat_input.text)

                ScrollView:
                    id: chat_scroll_view
                    size_hint_y: None
                    height: self.parent.height - chat_input.height  # Adjust the height to match the parent
                    do_scroll_y: True
                    GridLayout:
                        id: chat_message_list
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)


        MDBottomNavigationItem:
            name: "screen3"
            text: "Server Log"
            icon: "text"
            BoxLayout:
                orientation: "vertical"
                ScrollView:
                    size_hint_y: None
                    height: self.parent.height  # Adjust the height to match the parent
                    do_scroll_y: True  # Disable automatic scrolling
                    MDList:
                        id: log_message_list  # Give an id to the MDList widget


        MDBottomNavigationItem:
            name: "screen4"
            text: "Settings"
            icon: "application-settings"

            BoxLayout:
                orientation: 'vertical'
                padding: dp(10)

                GridLayout:
                    cols: 2
                    row_default_height: '48dp'
                    row_force_default: True
                    spacing: dp(10)

                    MDLabel:
                        text: "OpenTTD Server"
                        size_hint_x: None
                        width: dp(150)

                    MDTextField:
                        id: openttd_server
                        hint_text: "Enter OpenTTD Server address"
                        text: app.server  # Load from app.server

                    MDLabel:
                        text: "Server Alias Name"
                        size_hint_x: None
                        width: dp(150)


                    MDTextField:
                        id: server_alias
                        hint_text: "Enter an Alias Name for Your Server"
                        text: app.server_alias  # Load from app.server

                    MDLabel:
                        text: "Admin Port Number"
                        size_hint_x: None
                        width: dp(150)

                    MDTextField:
                        id: admin_port
                        hint_text: "Enter Admin Port Number"
                        text: str(app.admin_port)  # Load from app.admin_port

                    MDLabel:
                        text: "Admin Password"
                        size_hint_x: None
                        width: dp(150)

                    MDTextField:
                        id: admin_password
                        hint_text: "Enter Admin Password"
                        text: app.password  # Load from app.password

                    MDLabel:
                        text: "Enable Logging"
                        size_hint_x: None
                        width: dp(150)

                    MDCheckbox:
                        id: enable_logging
                        active: app.logging_enabled  # Load from app.logging_enabled

                    MDLabel:
                        text: "[b]Logging Packets[/b]"
                        size_hint_x: None
                        markup: True
                        width: dp(150)

                    MDLabel:
                        text: ""
                        size_hint_x: None
                        width: dp(150)

                    MDLabel:
                        text: "Chat Packets"
                        size_hint_x: None
                        width: dp(150)

                    MDCheckbox:
                        id: enable_chat_logging
                        active: app.logging_chat_enabled

                    MDLabel:
                        text: "Console Packets"
                        size_hint_x: None
                        width: dp(150)

                    MDCheckbox:
                        id: enable_console_logging
                        active: app.logging_console_enabled

                    MDLabel:
                        text: "Client Info Packets"
                        size_hint_x: None
                        width: dp(150)

                    MDCheckbox:
                        id: enable_clientinfo_logging
                        active: app.logging_clientinfo_enabled

                    MDLabel:
                        text: "Rcon Packets"
                        size_hint_x: None
                        width: dp(150)

                    MDCheckbox:
                        id: enable_rcon_logging
                        active: app.logging_rcon_enabled


                    MDRaisedButton:
                        text: "Save"
                        size_hint_y: None
                        height: "48dp"
                        on_release: app.save_settings(openttd_server.text, server_alias.text, admin_port.text, admin_password.text, enable_logging.active, enable_chat_logging.active, enable_console_logging.active, enable_clientinfo_logging.active, enable_rcon_logging.active)